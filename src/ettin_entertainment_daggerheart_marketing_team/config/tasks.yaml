---
monitor_community_discussions_for_engagement_opportunities:
  description: >-
    Act as the primary social listener for Ettin Entertainment.
    FIRST, you MUST read the 'knowledge/products.json' file to load all current product titles, keywords, and themes (e.g., 'Gourd of Gloom', 'spooky', 'fantasy football', 'heroic').
    SECOND, you MUST scan {platforms} (Reddit, Discord, X, TikTok) for Daggerheart discussions.
    Your goal is to find high-value engagement opportunities. You MUST prioritize your findings in this order:
    1.  **Direct Product-Match:** Conversations where a user is asking for an adventure that *directly matches* one of our product's keywords (e.g., "looking for a good Halloween one-shot").
    2.  **High-Visibility/Influence:** Trending posts from influential community members (reviewers, popular GMs) where a helpful comment would have high visibility.
    3.  **General Help-Seeking:** New GMs asking for advice on topics our products solve (e.g., "how to run a low-prep one-shot," "ideas for a Tier 1 adventure").
    Do NOT log simple venting or arguments. Focus on genuine questions and positive discussions.
  expected_output: >-
    A prioritized engagement queue (engagement_opportunities.txt) with 5-10 high-value conversation opportunities.
    Each entry MUST include:
    1.  Platform and direct URL to the conversation.
    2.  Conversation Context (a brief summary).
    3.  **Why It's Valuable** (e.g., "Matches 'Gourd of Gloom' 'spooky' keyword," "High-traffic post").
    4.  **Suggested Engagement Angle** (e.g., "Offer helpful, value-first advice on running spooky adventures, then subtly link 'Gourd of Gloom' as a pre-built example").
    5.  Any mechanical topics that require Rules Expert validation.
  agent: community_engagement_strategist_social_media_scout
  output_file: 'engagement_opportunities.txt'

gather_market_intelligence_and_trend_analysis:
  description: >-
    Act as the primary marketing strategist.
    FIRST, you MUST read the 'knowledge/products.json' file to load all product titles, keywords, and themes.
    Your core function is to create a "Synergy Map" by cross-referencing our product catalog against external events.
    You MUST research:
    1.  **Competitor News:** {competitor_focus} (Critical Role/Darrington Press) announcements, blog posts, and release schedules.
    2.  **Market Trends:** Trending themes, discussions, and content types within the Daggerheart community.
    3.  **Temporal & Cultural Events:** Upcoming holidays (e.g., Halloween, Thanksgiving), seasons, or major real-world events (e.g., a major sports final relevant to a 'Heroic' themed adventure).
    Your analysis MUST identify **proactive synergy opportunities** and **full campaign ideas**.
    You MUST provide a detailed, multi-point report.
  expected_output: >-
    A comprehensive market intelligence report (market_intelligence_report.txt) including:
    1.  **Synergy Opportunities:** An explicit mapping of our products to external events. (e.g., "Darrington Press announced a 'Heroic' themed Dispatch. -> Our products use 'Heroic' themes. -> PROPOSE 3 posts linking 'heroic' gameplay to this news").
    2.  **Proactive Campaigns:** A list of new marketing campaigns based on temporal events. (e.g., "It is November. -> Found 'Gourd of Gloom' in products.json with 'Halloween' keyword. -> PROPOSE 4-week 'Spooky Season' promotional calendar for this product.").
    3.  Market Gaps Analysis: Underserved niches where our products could be positioned.
  agent: market_intelligence_synergy_analyst
  output_file: 'market_intelligence_report.txt'

validate_mechanical_accuracy_of_engagement_opportunities:
  description: >-
    Act as the first-pass Quality Control and Brand Guardian.
    You MUST read the engagement opportunities from 'engagement_opportunities.txt'.
    You MUST ALSO read the 'knowledge/brand_voice_guide.json' file to load the official Ettin Entertainment persona.
    For each opportunity, you must perform two checks:
    1.  **Brand & Tone Validation:** Review the 'Suggested Engagement Angle.'
    2.  **Mechanical Validation:** Review any Daggerheart mechanical topics mentioned.
    You must flag any potential errors or brand-voice violations and provide guidance for the writer.
  expected_output: >-
    You MUST produce a single block of text that follows this exact template. Do not use any markdown asterisks.

    1. URL: [Insert URL for Opportunity 1 from engagement_opportunities.txt]
       Brand Voice Approval: [Your approval or rejection]
       Mechanical Accuracy Assessment: [Your assessment]
       Corrections & Guidance: [Your guidance for the writer]
       Correct Terminology to Use: [Any specific terms]

    2. URL: [Insert URL for Opportunity 2 from engagement_opportunities.txt]
       Brand Voice Approval: [Your approval or rejection]
       Mechanical Accuracy Assessment: [Your assessment]
       Corrections & Guidance: [Your guidance for the writer]
       Correct Terminology to Use: [Any specific terms]
    
    (continue for all 5 opportunities)
  agent: daggerheart_rules_expert_quality_control_specialist
  context:
  - monitor_community_discussions_for_engagement_opportunities
  output_file: 'validation_report.txt'

draft_marketing_content_and_community_responses:
  description: >-
    Act as the official voice of Ettin Entertainment.
    Your job is to synthesize all inputs into publish-ready content.
    You MUST read:
    1.  'knowledge/products.json' (for product details, titles, and URLs).
    2.  'knowledge/brand_voice_guide.json' (for your persona and all brand rules).
    3.  'validation_report.txt' (for the approved opportunities and guidance).
    4.  'market_intelligence_report.txt' (for the proactive campaign strategies).
    You will draft two types of content.
  expected_output: >-
    You MUST produce a single block of text that follows this exact template. Do not use any markdown asterisks.

    ### Reactive Content (Community Responses)

    1. URL_TO_POST: [Insert URL from validation_report.txt]
       DRAFTED_REPLY: [Insert your drafted reply for this URL, following the brand voice and guidance]

    2. URL_TO_POST: [Insert next URL from validation_report.txt]
       DRAFTED_REPLY: [Insert your drafted reply for this URL, following the brand voice and guidance]

    (continue for all opportunities from the validation_report.txt)

    ---

    ### Proactive Content (Social Media Posts Calendar)

    [CAMPAIGN_NAME_1_FROM_MARKET_REPORT]

    - Week 1 Post: [Drafted post text]
    - Week 2 Post: [Drafted post text]
    - (etc.)

    [CAMPAIGN_NAME_2_FROM_MARKET_REPORT]

    - Week 1 Post: [Drafted post text]
    - (etc.)
  agent: content_response_writer_with_brand_voice_expertise
  context:
  - validate_mechanical_accuracy_of_engagement_opportunities
  - gather_market_intelligence_and_trend_analysis
  output_file: 'drafted_marketing_content.txt'

final_quality_control_and_content_validation:
  description: >-
    Act as the final, ruthless Gatekeeper and Editor before publication.
    You MUST read the content from 'drafted_marketing_content.txt'.
    You MUST ALSO read 'knowledge/products.json' and 'knowledge/brand_voice_guide.json'.
    Your job is to be an editor with final cut authority. You must review BOTH the 'Reactive Content' and 'Proactive Content' sections from the draft file.
    Review each individual post for:
    1.  **Temporal Relevance (CRITICAL):** Cross-reference all content with the current date (**November 7th, 2025**). If a post mentions 'Halloween' as upcoming, it is temporally irrelevant and **MUST BE DELETED**.
    2.  **Brand Voice & "Garbage" Filter:** Does it sound like a human expert, or a generic, spammy bot? If it's "garbage," remove it.
    3.  **Product Accuracy:** Does the post use the *exact* product title, tier, and themes as listed in 'knowledge/products.json'?
    4.  **Mechanical Accuracy:** Final check for correct Daggerheart terminology.
  expected_output: >-
    You MUST produce a single block of text that follows this exact template. Do not use any markdown asterisks.

    ### Reactive Content (Community Responses)

    1. URL_TO_POST: [Insert URL from draft]
       APPROVED_REPLY: [Insert approved reply from draft]

    2. URL_TO_POST: [Insert next URL from draft]
       APPROVED_REPLY: [Insert approved reply from draft]

    (continue for all approved opportunities)

    ---

    ### Proactive Content (Social Media Posts Calendar)

    [APPROVED_CAMPAIGN_NAME_1]

    - Week 1 Post: [Approved post text]
    - Week 2 Post: [Approved post text]
    - (etc.)

    (continue for all approved, temporally-relevant campaigns)
  agent: daggerheart_rules_expert_quality_control_specialist
  context:
  - draft_marketing_content_and_community_responses
  output_file: 'final_content_package.txt'